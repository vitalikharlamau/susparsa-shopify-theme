<section
  class='product'
  data-section-type='alternate-product'
  data-section-id='{{section.id}}'
  data-handle='{{product.handle}}'
  data-money-format='{{shop.money_format}}'
>
  <div class='product__container container'>
    <img class='product__image' src='{{product.featured_image.src | image_url}}' alt='{{product.featured_image.alt}}'>
    {%- form 'product', product, id: 'product-form', class: 'product__form form' -%}
      <h1 class='form__heading heading heading--xl'>{{ product.title }}</h1>
      <p class='form__price'>
        <abbr class='form__price-currency' title='Euro'>EUR</abbr>
        <span class='form__price-value'>{{ product.price | money_without_currency }}</span>
      </p>
      <p class='form__tax'><small>Tax included</small></p>
      {%- for product_option in product.options_with_values -%}
        {%- if product_option.name == 'Color' -%}
          <fieldset class='form__fildset fieldset'>
            <legend class='fieldset__title'>{{ product_option.name }}</legend>
            <div class='fieldset__group'>
              {%- for value in product_option.values -%}
                <div class='radio'>
                  <input
                    class='radio__input visually-hidden'
                    type='radio'
                    id='{{value}}'
                    value='{{value}}'
                    name='options[{{product_option.name}}]'
                    {%- if product_option.selected_value == value -%}
                      checked
                    {%- endif -%}
                  >
                  <label class='radio__label radio__label--color' for='{{value}}' data-title='{{value}}'>
                    <div style='background-color: {{value}}' class='radio__color'></div>
                  </label>
                </div>
              {%- endfor -%}
            </div>
          </fieldset>
        {%- else -%}
          <fieldset class='form__fildset fieldset'>
            <legend class='fieldset__title'>{{ product_option.name }}</legend>
            <div class='fieldset__group'>
              {%- for value in product_option.values -%}
                <div class='radio'>
                  <input
                    class='radio__input visually-hidden'
                    type='radio'
                    id='{{value}}'
                    value='{{value}}'
                    name='options[{{product_option.name}}]'
                    {%- if product_option.selected_value == value -%}
                      checked
                    {%- endif -%}
                  >
                  <label class='radio__label radio__label--size' for='{{value}}'>
                    <span class='radio__size'>{{ value }}</span>
                  </label>
                </div>
              {%- endfor -%}
            </div>
          </fieldset>
        {%- endif -%}
      {%- endfor -%}
      <fieldset class='form__quantity quantity'>
        <legend class='quantity__title'>Quantity</legend>
        <div class='quantity__controls'>
          <input class='quantity__input' type='number' min='1' max='999' step='1' value='1'>
          <button class='quantity__button quantity__button--increase' type='button'>
            <span class='visually-hidden'>Increase quantity</span>
            -
          </button>
          <button class='quantity__button quantity__button--decrease' type='button'>
            <span class='visually-hidden'>Decrease quantity</span>
            +
          </button>
        </div>
      </fieldset>
      <button class='form__button button button--light' type='submit' value='add'>
        {{ 'products.product.add_to_cart' | t }}
      </button>
      <button class='form__button button button--dark' type='submit' value='buy'>
        {{ 'products.product.buy_it_now' | t }}
      </button>
      {%- if product.description != blank -%}
        <p class='form__info'>{{ product.description }}</p>
      {%- endif -%}
      <input type='hidden' name='sections' value='alternate-header'>
    {%- endform -%}
    <div class='accordion'>
      <span class='visually-hidden' id='accordion_heading' aria-hidden='true'>Additional product information</span>
      <ul class='accordion__list' role='list' aria-labelledby='accordion_heading'>
        {%- assign ID = 0 -%}
        {%- for accordion in section.blocks -%}
          {%- if accordion.settings.accordion_title != blank and accordion.settings.accordion_text != blank -%}
            {%- assign ID = ID | plus: 1 -%}
            <li class='accordion__item' id='{{accordion.id}}' {{ accordion.shopify_attributes }}>
              <button
                class='accordion__button'
                id='accordion_button{{ID}}'
                type='button'
                aria-expanded='false'
                aria-controls='accordion_content{{ID}}'
              >
                {{ accordion.settings.accordion_title }}
              </button>
              <div
                class='accordion__content'
                id='accordion_content{{ID}}'
                aria-hidden='true'
                aria-labelledby='accordion_button{{ID}}'
                role='region'
              >
                <p class='accordion__text'>{{ accordion.settings.accordion_text }}</p>
              </div>
            </li>
          {%- endif -%}
        {%- endfor -%}
      </ul>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "alternate-product",
  "templates": ["product"],
  "limit": 1,
  "settings": [],
  "blocks": [
    {
      "name": "Accordion",
      "type": "accordion",
      "settings": [
        {
          "type": "text",
          "id": "accordion_title",
          "label": "Heading",
          "default": "Accordion heading"
        },
        {
          "type": "inline_richtext",
          "id": "accordion_text",
          "default": "<i>Accordion text</i>",
          "label": "Content"
        }
      ]
    }
  ]
}
{% endschema %}
